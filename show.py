import numpy as np
from utils.camera_pose_visualizer import CameraPoseVisualizer

if __name__ == '__main__':
    # argument : the minimum/maximum value of x, y, z
    tag = 3
    # argument : extrinsic matrix, color, scaled focal length(z-axis length of frame body of camera
    if tag == 1:
        extrinsic1 = np.array([-0.03952978803301378,
            -0.9483871632151186,
            0.3146413585446852,
            -0.2987431592280396,
            0.5991174930499701,
            0.2295118764594083,
            0.7670609676457282,
            0.3165333142443727,
            -0.799684703729904,
            0.21882889940056294,
            0.5591227838387153,
            1.2467007952417066,
            0.0,
            0.0,
            0.0,
            1.0]).reshape(4, 4)
        print(extrinsic1)
        extrinsic2 = np.array([0.1586621772950886,
            -0.972389322535795,
            0.17112953840398004,
            -0.31618681021688805,
            0.857703671298177,
            0.0498926668387539,
            -0.5117178265776418,
            0.35082786222726536,
            0.489050841669463,
            0.22796869788217536,
            0.8419379710217939,
            1.3042712958136873,
            0.0,
            0.0,
            0.0,
            1.0]).reshape(4, 4)
        extrinsic3 = np.array([-0.3817043659128996,
            -0.9222782148296316,
            -0.06086601263184299,
            -0.12445520063849169,
            -0.7071350255979154,
            0.24898782725424962,
            0.6617893301133253,
            0.464685642091889,
            -0.595198985731383,
            0.29564836601929084,
            -0.7472149697740648,
            1.2208836736357713,
            0.0,
            0.0,
            0.0,
            1.0]).reshape(4, 4)
    elif tag == 2:
        extrinsic1 = np.array([0.03273521239094195,
                    -0.9252662753327445,
                    0.37790306376317048,
                    -1.1561393429184599,
                    -0.035075076895768057,
                    0.37680927916850678,
                    0.9256265478654261,
                    -1.9161483846349426,
                    -0.998848409344719,
                    -0.04355556065970864,
                    -0.020118853971898083,
                    0.20333735577159219,
                    0.0,
                    0.0,
                    0.0,
                    1.0]).reshape(4, 4)
        extrinsic2 = np.array([0.011510577657449145,
                    -0.1597703994861031,
                    0.9870870914210366,
                    -2.149544290231388,
                    -0.04034504084833867,
                    0.9862744440047848,
                    0.16010933383784332,
                    -0.17318224818557297,
                    -0.9991195045043105,
                    -0.041667019945073217,
                    0.004906645285652073,
                    0.13759590031088715,
                    0.0,
                    0.0,
                    0.0,
                    1.0
                ]).reshape(4, 4)
        extrinsic3 = np.array([0.06385824588441935,
                    0.21612109263819663,
                    -0.9742760377580052,
                    1.7231841032512028,
                    -0.02966724899844867,
                    -0.9754260208264897,
                    -0.21832070957988518,
                    0.36248456283284039,
                    -0.9975179089968401,
                    0.042845667359401897,
                    -0.05587727641088452,
                    0.2138559808575741,
                    0.0,
                    0.0,
                    0.0,
                    1.0
                ]).reshape(4, 4)
    elif tag == 3:
        extrinsic1 = np.array([ 4.8925189020383585e-02, -9.9285645048805404e-01,
       1.0882276693588538e-01, -9.3647325246510948e-01,
       7.7253762760865030e-01, 1.0667555384347527e-01,
       6.2594403914486341e-01, 4.4049449582792104e-03,
       -6.3308130584318967e-01, 5.3445251767113233e-02,
       7.7223808845163289e-01, 1.7681011478394018e+00, 0., 0., 0., 1. ]).reshape(4, 4)
        extrinsic2 = np.array([-5.0097837786926946e-02, -9.9873918235002013e-01,
       3.2019194068741985e-03, -9.6530008615993013e-01,
       7.2885238551484599e-01, -3.8751533959252488e-02,
       -6.8357334554905180e-01, 7.9222113074979197e-03,
       6.8283556349855801e-01, -3.1911819982856970e-02,
       7.2987480362524437e-01, 1.8104081464781949e+00, 0., 0., 0., 1.  ]).reshape(4, 4)
        extrinsic3= np.array([ -1.1779803851028225e-01, -9.9218777302589500e-01,
       4.1073655559800859e-02, -7.2935566925430295e-01,
       -5.1622566373108469e-01, 9.6517935220408968e-02,
       8.5099668171279619e-01, 1.6819037988000501e-01,
       -8.4831284690763176e-01, 7.9042464781306165e-02,
       -5.2356241512618618e-01, 1.6872308862876411e+00, 0., 0., 0., 1.  ]).reshape(4, 4)
    elif tag == 4:
        extrinsic1 = np.array([6.0307937380676124e-01, 1.4605866948298324e-01,
       7.8419521418949334e-01, 3.3973900247519673e-01,
       -5.3526293831910521e-01, 8.0299953541520885e-01,
       2.6207886787178458e-01, 1.5421805355107017e+00,
       -5.9142950192803412e-01, -5.7780499408694908e-01,
       5.6245224957976503e-01, 1.1824617977806617e+00, 0., 0., 0., 1. ]).reshape(4, 4)
        extrinsic2 = np.array([8.5111525874686011e-01, 3.9637290673767325e-02,
       -5.2348037357317279e-01, 3.5554999160779710e-01,
       2.7901284086307165e-01, 8.1050313943446495e-01,
       5.1501116065614971e-01, 1.6410160877125162e+00,
       4.4469613328854513e-01, -5.8439160342609264e-01,
       6.7877227615990399e-01, 1.2512866207979294e+00, 0., 0., 0., 1. ]).reshape(4, 4)
        extrinsic3= np.array([  -7.2866602702316829e-01, 1.5963040342605825e-01,
       6.6600597246894522e-01, 4.8180200459192674e-01,
       -2.7998770055756683e-01, 8.1804608141187785e-01,
       -5.0240172792612736e-01, 1.3288772561761499e+00,
       -6.2502216648592379e-01, -5.5255655184669206e-01,
       -5.5138783846992512e-01, 1.1466192643280855e+00, 0., 0., 0., 1. ]).reshape(4, 4)
    elif tag == 5:
        extrinsic1 = np.array([9.4790544068580551e-01, -1.3944221236311027e-01,
       2.8641079750863124e-01, -8.3382523979058054e-01,
       4.8235456285697961e-02, 9.5156515827621180e-01,
       3.0363973770189995e-01, 1.9129339678145054e+00,
       -3.1487873264982419e-01, -2.7400660387306236e-01,
       9.0871984943589257e-01, 1.9350641240148287e+00, 0., 0., 0., 1. ]).reshape(4, 4)
        extrinsic2 = np.array([4.2264285963514497e-01, -1.8339069939911692e-01,
       -8.8754766890197512e-01, -8.1887430269462158e-01,
       4.4169105884126258e-01, 8.9681817444487733e-01,
       2.5023399550062803e-02, 1.8703917605798241e+00,
       7.9137982141264607e-01, -4.0259783079303901e-01,
       4.6003583001938886e-01, 1.8843813024347733e+00, 0., 0., 0., 1. ]).reshape(4, 4)
        extrinsic3= np.array([ -1.1195124484304192e-01, -1.5453442697885722e-01,
       9.8162417943753277e-01, -5.8365767539579860e-01,
       -3.0614600130394687e-01, 9.4514898563216576e-01,
       1.1387721828395742e-01, 1.5951784021660955e+00,
       -9.4537904814084872e-01, -2.8777162097191683e-01,
       -1.5312070238703318e-01, 1.7915838198432807e+00, 0., 0., 0., 1. ]).reshape(4, 4)
        print(extrinsic1)
    extrinsic1 = np.linalg.inv(extrinsic1)
    extrinsic1 = np.array([extrinsic1[0], extrinsic1[2], extrinsic1[1], extrinsic1[3]])
    extrinsic2 = np.linalg.inv(extrinsic2)
    extrinsic2 = np.array([extrinsic2[0], extrinsic2[2], extrinsic2[1], extrinsic2[3]])
    extrinsic3 = np.linalg.inv(extrinsic3)
    extrinsic3 = np.array([extrinsic3[0], extrinsic3[2], extrinsic3[1], extrinsic3[3]])
    print(extrinsic1)
    visualizer = CameraPoseVisualizer([-2, 2], [-2, 2], [-2, 2])
    r = 1
    visualizer.extrinsic2pyramid(extrinsic1, 'c', r)
    visualizer.extrinsic2pyramid(extrinsic2, 'r', r)
    visualizer.extrinsic2pyramid(extrinsic3, 'g', r)

    visualizer.show()